include(BundleUtilities)

set(dirs
    /opt/local/lib
   )

file(CREATE_LINK
    "../../../../Frameworks/libnghttp2.14.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libnghttp2.14.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libpng16.16.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libpng16.16.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libjpeg.8.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libjpeg.8.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libaprutil-1.0.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libaprutil-1.0.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libiconv.2.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libiconv.2.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libapr-1.0.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libapr-1.0.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libz.1.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libz.1.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libboost_atomic-mt.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libboost_atomic-mt.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libboost_context-mt.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libboost_context-mt.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libboost_fiber-mt.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libboost_fiber-mt.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libboost_filesystem-mt.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libboost_filesystem-mt.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libboost_program_options-mt.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libboost_program_options-mt.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libboost_regex-mt.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libboost_regex-mt.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libboost_system-mt.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libboost_system-mt.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libboost_thread-mt.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libboost_thread-mt.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libboost_url-mt.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libboost_url-mt.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libexpat.1.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libexpat.1.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libfreetype.6.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libfreetype.6.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libbz2.1.0.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libbz2.1.0.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libbrotlidec.1.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libbrotlidec.1.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libbrotlicommon.1.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libbrotlicommon.1.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libicudata.74.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libicudata.74.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libicui18n.74.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libicui18n.74.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/libicuuc.74.dylib"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/libicuuc.74.dylib"
    SYMBOLIC
    )
file(CREATE_LINK
    "../../../../Frameworks/Chromium Embedded Framework.framework"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/Chromium Embedded Framework.framework"
    SYMBOLIC
    )

fixup_bundle(${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/MacOS/${VIEWER_CHANNEL} "" "${dirs}")

file(CHMOD
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/DullahanHelper.app/Contents/MacOS/DullahanHelper"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/DullahanHelper (GPU).app/Contents/MacOS/DullahanHelper (GPU)"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/DullahanHelper (Plugin).app/Contents/MacOS/DullahanHelper (Plugin)"
    "${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks/DullahanHelper (Renderer).app/Contents/MacOS/DullahanHelper (Renderer)"
    PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
    )

execute_process(
    COMMAND hdiutil detach /Volumes/VLC\ media\ player
    COMMAND lipo libalut.0.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libalut.0.dylib
    COMMAND lipo libapr-1.0.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libapr-1.0.dylib
    COMMAND lipo libaprutil-1.0.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libaprutil-1.0.dylib
    COMMAND lipo libboost_atomic-mt.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libboost_atomic-mt.dylib
    COMMAND lipo libboost_context-mt.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libboost_context-mt.dylib
    COMMAND lipo libboost_fiber-mt.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libboost_fiber-mt.dylib
    COMMAND lipo libboost_filesystem-mt.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libboost_filesystem-mt.dylib
    COMMAND lipo libboost_program_options-mt.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libboost_program_options-mt.dylib
    COMMAND lipo libboost_regex-mt.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libboost_regex-mt.dylib
    COMMAND lipo libboost_system-mt.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libboost_system-mt.dylib
    COMMAND lipo libboost_thread-mt.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libboost_thread-mt.dylib
    COMMAND lipo libboost_url-mt.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libboost_url-mt.dylib
    COMMAND lipo libbrotlicommon.1.1.0.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libbrotlicommon.1.1.0.dylib
    COMMAND lipo libbrotlidec.1.1.0.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libbrotlidec.1.1.0.dylib
    COMMAND lipo libbz2.1.0.8.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libbz2.1.0.8.dylib
    COMMAND lipo libcollada14dom.2.3-r4.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libcollada14dom.2.3-r4.dylib
    COMMAND lipo libexpat.1.10.0.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libexpat.1.10.0.dylib
    COMMAND lipo libfreetype.6.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libfreetype.6.dylib
    COMMAND lipo libhunspell-1.7.0.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libhunspell-1.7.0.dylib
    COMMAND lipo libiconv.2.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libiconv.2.dylib
    COMMAND lipo libicudata.74.2.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libicudata.74.2.dylib
    COMMAND lipo libicui18n.74.2.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libicui18n.74.2.dylib
    COMMAND lipo libicuuc.74.2.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libicuuc.74.2.dylib
    COMMAND lipo libjpeg.8.3.2.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libjpeg.8.3.2.dylib
    COMMAND lipo libllwebrtc.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libllwebrtc.dylib
    COMMAND lipo liblzma.5.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output liblzma.5.dylib
    COMMAND lipo libminizip.1.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libminizip.1.dylib
    COMMAND lipo libncurses.6.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libncurses.6.dylib
    COMMAND lipo libndofdev.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libndofdev.dylib
    COMMAND lipo libnghttp2.14.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libnghttp2.14.dylib
    COMMAND lipo libogg.0.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libogg.0.dylib
    COMMAND lipo libopenal.1.23.1.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libopenal.1.23.1.dylib
    COMMAND lipo libpcre.1.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libpcre.1.dylib
    COMMAND lipo libpcrecpp.0.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libpcrecpp.0.dylib
    COMMAND lipo libpng16.16.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libpng16.16.dylib
    COMMAND lipo libvlc.5.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libvlc.5.dylib
    COMMAND lipo libvlccore.9.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libvlccore.9.dylib
    COMMAND lipo libvorbis.0.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libvorbis.0.dylib
    COMMAND lipo libvorbisenc.2.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libvorbisenc.2.dylib
    COMMAND lipo libvorbisfile.3.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libvorbisfile.3.dylib
    COMMAND lipo libxml2.2.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libxml2.2.dylib
    COMMAND lipo libz.1.3.1.dylib
        -thin ${CMAKE_OSX_ARCHITECTURES}
        -output libz.1.3.1.dylib
    WORKING_DIRECTORY ${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Frameworks
    ERROR_QUIET
    )

message("By default, the situation is assumed to be the strictest, an Apple Silicon Mac with the default security settings. Running a native self-built viewer on it without correct codesigning would lead to a crash. Also, codesigning requires administrative access. If you believe you're not in such a situation, you can remove the sudos in this file.")
execute_process(
    COMMAND sudo codesign -f -s ${SIGNING_IDENTITY} --timestamp -o runtime --runtime-version ${CMAKE_OSX_DEPLOYMENT_TARGET}
        Frameworks/Chromium\ Embedded\ Framework.framework/Libraries/libEGL.dylib
        Frameworks/Chromium\ Embedded\ Framework.framework/Libraries/libGLESv2.dylib
        Frameworks/Chromium\ Embedded\ Framework.framework/Libraries/libvk_swiftshader.dylib
        Frameworks/Chromium\ Embedded\ Framework.framework
        Frameworks/libalut.0.dylib
        Frameworks/libapr-1.0.dylib
        Frameworks/libaprutil-1.0.dylib
        Frameworks/libboost_atomic-mt.dylib
        Frameworks/libboost_context-mt.dylib
        Frameworks/libboost_fiber-mt.dylib
        Frameworks/libboost_filesystem-mt.dylib
        Frameworks/libboost_program_options-mt.dylib
        Frameworks/libboost_regex-mt.dylib
        Frameworks/libboost_system-mt.dylib
        Frameworks/libboost_thread-mt.dylib
        Frameworks/libboost_url-mt.dylib
        Frameworks/libbrotlicommon.1.1.0.dylib
        Frameworks/libbrotlidec.1.1.0.dylib
        Frameworks/libbz2.1.0.8.dylib
        Frameworks/libcollada14dom.2.3-r4.dylib
        Frameworks/libexpat.1.10.0.dylib
        Frameworks/libfreetype.6.dylib
        Frameworks/libhunspell-1.7.0.dylib
        Frameworks/libiconv.2.dylib
        Frameworks/libicudata.74.2.dylib
        Frameworks/libicui18n.74.2.dylib
        Frameworks/libicuuc.74.2.dylib
        Frameworks/libjpeg.8.3.2.dylib
        Frameworks/libllwebrtc.dylib
        Frameworks/liblzma.5.dylib
        Frameworks/libminizip.1.dylib
        Frameworks/libncurses.6.dylib
        Frameworks/libndofdev.dylib
        Frameworks/libnghttp2.14.dylib
        Frameworks/libogg.0.dylib
        Frameworks/libopenal.1.23.1.dylib
        Frameworks/libpcre.1.dylib
        Frameworks/libpcrecpp.0.dylib
        Frameworks/libpng16.16.dylib
        Frameworks/libvlc.5.dylib
        Frameworks/libvlccore.9.dylib
        Frameworks/libvorbis.0.dylib
        Frameworks/libvorbisenc.2.dylib
        Frameworks/libvorbisfile.3.dylib
        Frameworks/libxml2.2.dylib
        Frameworks/libz.1.3.1.dylib
        Resources/libndofdev.dylib
        Resources/llplugin/media_plugin_cef.dylib
        Resources/llplugin/media_plugin_libvlc.dylib
        Resources/llplugin/plugins/liba52_plugin.dylib
        Resources/llplugin/plugins/libaccess_concat_plugin.dylib
        Resources/llplugin/plugins/libaccess_imem_plugin.dylib
        Resources/llplugin/plugins/libaccess_mms_plugin.dylib
        Resources/llplugin/plugins/libaccess_output_dummy_plugin.dylib
        Resources/llplugin/plugins/libaccess_output_file_plugin.dylib
        Resources/llplugin/plugins/libaccess_output_http_plugin.dylib
        Resources/llplugin/plugins/libaccess_output_livehttp_plugin.dylib
        Resources/llplugin/plugins/libaccess_output_rist_plugin.dylib
        Resources/llplugin/plugins/libaccess_output_shout_plugin.dylib
        Resources/llplugin/plugins/libaccess_output_srt_plugin.dylib
        Resources/llplugin/plugins/libaccess_output_udp_plugin.dylib
        Resources/llplugin/plugins/libaccess_realrtsp_plugin.dylib
        Resources/llplugin/plugins/libaccess_srt_plugin.dylib
        Resources/llplugin/plugins/libadaptive_plugin.dylib
        Resources/llplugin/plugins/libaddonsfsstorage_plugin.dylib
        Resources/llplugin/plugins/libaddonsvorepository_plugin.dylib
        Resources/llplugin/plugins/libadf_plugin.dylib
        Resources/llplugin/plugins/libadjust_plugin.dylib
        Resources/llplugin/plugins/libadpcm_plugin.dylib
        Resources/llplugin/plugins/libadummy_plugin.dylib
        Resources/llplugin/plugins/libaes3_plugin.dylib
        Resources/llplugin/plugins/libafile_plugin.dylib
        Resources/llplugin/plugins/libaiff_plugin.dylib
        Resources/llplugin/plugins/libalphamask_plugin.dylib
        Resources/llplugin/plugins/libamem_plugin.dylib
        Resources/llplugin/plugins/libanaglyph_plugin.dylib
        Resources/llplugin/plugins/libantiflicker_plugin.dylib
        Resources/llplugin/plugins/libaom_plugin.dylib
        Resources/llplugin/plugins/libaraw_plugin.dylib
        Resources/llplugin/plugins/libarchive_plugin.dylib
        Resources/llplugin/plugins/libaribsub_plugin.dylib
        Resources/llplugin/plugins/libasf_plugin.dylib
        Resources/llplugin/plugins/libattachment_plugin.dylib
        Resources/llplugin/plugins/libau_plugin.dylib
        Resources/llplugin/plugins/libaudio_format_plugin.dylib
        Resources/llplugin/plugins/libaudiobargraph_a_plugin.dylib
        Resources/llplugin/plugins/libaudiobargraph_v_plugin.dylib
        Resources/llplugin/plugins/libaudioscrobbler_plugin.dylib
        Resources/llplugin/plugins/libaudiotoolboxmidi_plugin.dylib
        Resources/llplugin/plugins/libauhal_plugin.dylib
        Resources/llplugin/plugins/libavaudiocapture_plugin.dylib
        Resources/llplugin/plugins/libavcapture_plugin.dylib
        Resources/llplugin/plugins/libavcodec_plugin.dylib
        Resources/llplugin/plugins/libavi_plugin.dylib
        Resources/llplugin/plugins/libball_plugin.dylib
        Resources/llplugin/plugins/libblend_plugin.dylib
        Resources/llplugin/plugins/libblendbench_plugin.dylib
        Resources/llplugin/plugins/libbluescreen_plugin.dylib
        Resources/llplugin/plugins/libbluray-awt-j2se-1.3.2.jar
        Resources/llplugin/plugins/libbluray-j2se-1.3.2.jar
        Resources/llplugin/plugins/libbonjour_plugin.dylib
        Resources/llplugin/plugins/libcache_block_plugin.dylib
        Resources/llplugin/plugins/libcache_read_plugin.dylib
        Resources/llplugin/plugins/libcaf_plugin.dylib
        Resources/llplugin/plugins/libcanvas_plugin.dylib
        Resources/llplugin/plugins/libcaopengllayer_plugin.dylib
        Resources/llplugin/plugins/libcc_plugin.dylib
        Resources/llplugin/plugins/libcdda_plugin.dylib
        Resources/llplugin/plugins/libcdg_plugin.dylib
        Resources/llplugin/plugins/libchain_plugin.dylib
        Resources/llplugin/plugins/libchorus_flanger_plugin.dylib
        Resources/llplugin/plugins/libci_filters_plugin.dylib
        Resources/llplugin/plugins/libclone_plugin.dylib
        Resources/llplugin/plugins/libcolorthres_plugin.dylib
        Resources/llplugin/plugins/libcompressor_plugin.dylib
        Resources/llplugin/plugins/libconsole_logger_plugin.dylib
        Resources/llplugin/plugins/libcroppadd_plugin.dylib
        Resources/llplugin/plugins/libcvdsub_plugin.dylib
        Resources/llplugin/plugins/libcvpx_plugin.dylib
        Resources/llplugin/plugins/libdav1d_plugin.dylib
        Resources/llplugin/plugins/libdca_plugin.dylib
        Resources/llplugin/plugins/libdcp_plugin.dylib
        Resources/llplugin/plugins/libddummy_plugin.dylib
        Resources/llplugin/plugins/libdecomp_plugin.dylib
        Resources/llplugin/plugins/libdeinterlace_plugin.dylib
        Resources/llplugin/plugins/libdemux_cdg_plugin.dylib
        Resources/llplugin/plugins/libdemux_chromecast_plugin.dylib
        Resources/llplugin/plugins/libdemux_stl_plugin.dylib
        Resources/llplugin/plugins/libdemuxdump_plugin.dylib
        Resources/llplugin/plugins/libdiracsys_plugin.dylib
        Resources/llplugin/plugins/libdirectory_demux_plugin.dylib
        Resources/llplugin/plugins/libdolby_surround_decoder_plugin.dylib
        Resources/llplugin/plugins/libdummy_plugin.dylib
        Resources/llplugin/plugins/libdvbsub_plugin.dylib
        Resources/llplugin/plugins/libdvdnav_plugin.dylib
        Resources/llplugin/plugins/libdvdread_plugin.dylib
        Resources/llplugin/plugins/libdynamicoverlay_plugin.dylib
        Resources/llplugin/plugins/libedgedetection_plugin.dylib
        Resources/llplugin/plugins/libedummy_plugin.dylib
        Resources/llplugin/plugins/libequalizer_plugin.dylib
        Resources/llplugin/plugins/liberase_plugin.dylib
        Resources/llplugin/plugins/libes_plugin.dylib
        Resources/llplugin/plugins/libexport_plugin.dylib
        Resources/llplugin/plugins/libextract_plugin.dylib
        Resources/llplugin/plugins/libfaad_plugin.dylib
        Resources/llplugin/plugins/libfile_keystore_plugin.dylib
        Resources/llplugin/plugins/libfile_logger_plugin.dylib
        Resources/llplugin/plugins/libfilesystem_plugin.dylib
        Resources/llplugin/plugins/libfingerprinter_plugin.dylib
        Resources/llplugin/plugins/libflac_plugin.dylib
        Resources/llplugin/plugins/libflacsys_plugin.dylib
        Resources/llplugin/plugins/libflaschen_plugin.dylib
        Resources/llplugin/plugins/libfloat_mixer_plugin.dylib
        Resources/llplugin/plugins/libfolder_plugin.dylib
        Resources/llplugin/plugins/libfps_plugin.dylib
        Resources/llplugin/plugins/libfreetype_plugin.dylib
        Resources/llplugin/plugins/libfreeze_plugin.dylib
        Resources/llplugin/plugins/libftp_plugin.dylib
        Resources/llplugin/plugins/libg711_plugin.dylib
        Resources/llplugin/plugins/libgain_plugin.dylib
        Resources/llplugin/plugins/libgaussianblur_plugin.dylib
        Resources/llplugin/plugins/libgestures_plugin.dylib
        Resources/llplugin/plugins/libglconv_cvpx_plugin.dylib
        Resources/llplugin/plugins/libgme_plugin.dylib
        Resources/llplugin/plugins/libgnutls_plugin.dylib
        Resources/llplugin/plugins/libgoom_plugin.dylib
        Resources/llplugin/plugins/libgradfun_plugin.dylib
        Resources/llplugin/plugins/libgradient_plugin.dylib
        Resources/llplugin/plugins/libgrain_plugin.dylib
        Resources/llplugin/plugins/libgrey_yuv_plugin.dylib
        Resources/llplugin/plugins/libh26x_plugin.dylib
        Resources/llplugin/plugins/libhds_plugin.dylib
        Resources/llplugin/plugins/libheadphone_channel_mixer_plugin.dylib
        Resources/llplugin/plugins/libhotkeys_plugin.dylib
        Resources/llplugin/plugins/libhqdn3d_plugin.dylib
        Resources/llplugin/plugins/libhttp_plugin.dylib
        Resources/llplugin/plugins/libhttps_plugin.dylib
        Resources/llplugin/plugins/libi420_10_p010_plugin.dylib
        Resources/llplugin/plugins/libi420_nv12_plugin.dylib
        Resources/llplugin/plugins/libi420_rgb_mmx_plugin.dylib
        Resources/llplugin/plugins/libi420_rgb_plugin.dylib
        Resources/llplugin/plugins/libi420_rgb_sse2_plugin.dylib
        Resources/llplugin/plugins/libi420_yuy2_mmx_plugin.dylib
        Resources/llplugin/plugins/libi420_yuy2_plugin.dylib
        Resources/llplugin/plugins/libi420_yuy2_sse2_plugin.dylib
        Resources/llplugin/plugins/libi422_i420_plugin.dylib
        Resources/llplugin/plugins/libi422_yuy2_mmx_plugin.dylib
        Resources/llplugin/plugins/libi422_yuy2_plugin.dylib
        Resources/llplugin/plugins/libi422_yuy2_sse2_plugin.dylib
        Resources/llplugin/plugins/libidummy_plugin.dylib
        Resources/llplugin/plugins/libimage_plugin.dylib
        Resources/llplugin/plugins/libimem_plugin.dylib
        Resources/llplugin/plugins/libinflate_plugin.dylib
        Resources/llplugin/plugins/libinteger_mixer_plugin.dylib
        Resources/llplugin/plugins/libinvert_plugin.dylib
        Resources/llplugin/plugins/libjpeg_plugin.dylib
        Resources/llplugin/plugins/libkaraoke_plugin.dylib
        Resources/llplugin/plugins/libkate_plugin.dylib
        Resources/llplugin/plugins/libkeychain_plugin.dylib
        Resources/llplugin/plugins/liblibass_plugin.dylib
        Resources/llplugin/plugins/liblibbluray_plugin.dylib
        Resources/llplugin/plugins/liblibmpeg2_plugin.dylib
        Resources/llplugin/plugins/liblive555_plugin.dylib
        Resources/llplugin/plugins/liblogger_plugin.dylib
        Resources/llplugin/plugins/liblogo_plugin.dylib
        Resources/llplugin/plugins/liblpcm_plugin.dylib
        Resources/llplugin/plugins/liblua_plugin.dylib
        Resources/llplugin/plugins/libmacosx_plugin.dylib
        Resources/llplugin/plugins/libmad_plugin.dylib
        Resources/llplugin/plugins/libmagnify_plugin.dylib
        Resources/llplugin/plugins/libmarq_plugin.dylib
        Resources/llplugin/plugins/libmediadirs_plugin.dylib
        Resources/llplugin/plugins/libmemory_keystore_plugin.dylib
        Resources/llplugin/plugins/libmirror_plugin.dylib
        Resources/llplugin/plugins/libmjpeg_plugin.dylib
        Resources/llplugin/plugins/libmkv_plugin.dylib
        Resources/llplugin/plugins/libmod_plugin.dylib
        Resources/llplugin/plugins/libmono_plugin.dylib
        Resources/llplugin/plugins/libmosaic_plugin.dylib
        Resources/llplugin/plugins/libmotion_plugin.dylib
        Resources/llplugin/plugins/libmotionblur_plugin.dylib
        Resources/llplugin/plugins/libmotiondetect_plugin.dylib
        Resources/llplugin/plugins/libmp4_plugin.dylib
        Resources/llplugin/plugins/libmpc_plugin.dylib
        Resources/llplugin/plugins/libmpg123_plugin.dylib
        Resources/llplugin/plugins/libmpgv_plugin.dylib
        Resources/llplugin/plugins/libmux_asf_plugin.dylib
        Resources/llplugin/plugins/libmux_avi_plugin.dylib
        Resources/llplugin/plugins/libmux_dummy_plugin.dylib
        Resources/llplugin/plugins/libmux_mp4_plugin.dylib
        Resources/llplugin/plugins/libmux_mpjpeg_plugin.dylib
        Resources/llplugin/plugins/libmux_ogg_plugin.dylib
        Resources/llplugin/plugins/libmux_ps_plugin.dylib
        Resources/llplugin/plugins/libmux_ts_plugin.dylib
        Resources/llplugin/plugins/libmux_wav_plugin.dylib
        Resources/llplugin/plugins/libncurses_plugin.dylib
        Resources/llplugin/plugins/libnetsync_plugin.dylib
        Resources/llplugin/plugins/libnfs_plugin.dylib
        Resources/llplugin/plugins/libnormvol_plugin.dylib
        Resources/llplugin/plugins/libnoseek_plugin.dylib
        Resources/llplugin/plugins/libnsc_plugin.dylib
        Resources/llplugin/plugins/libnsspeechsynthesizer_plugin.dylib
        Resources/llplugin/plugins/libnsv_plugin.dylib
        Resources/llplugin/plugins/libnuv_plugin.dylib
        Resources/llplugin/plugins/libogg_plugin.dylib
        Resources/llplugin/plugins/liboggspots_plugin.dylib
        Resources/llplugin/plugins/liboldmovie_plugin.dylib
        Resources/llplugin/plugins/liboldrc_plugin.dylib
        Resources/llplugin/plugins/libopus_plugin.dylib
        Resources/llplugin/plugins/libosx_notifications_plugin.dylib
        Resources/llplugin/plugins/libpacketizer_a52_plugin.dylib
        Resources/llplugin/plugins/libpacketizer_av1_plugin.dylib
        Resources/llplugin/plugins/libpacketizer_copy_plugin.dylib
        Resources/llplugin/plugins/libpacketizer_dirac_plugin.dylib
        Resources/llplugin/plugins/libpacketizer_dts_plugin.dylib
        Resources/llplugin/plugins/libpacketizer_flac_plugin.dylib
        Resources/llplugin/plugins/libpacketizer_h264_plugin.dylib
        Resources/llplugin/plugins/libpacketizer_hevc_plugin.dylib
        Resources/llplugin/plugins/libpacketizer_mlp_plugin.dylib
        Resources/llplugin/plugins/libpacketizer_mpeg4audio_plugin.dylib
        Resources/llplugin/plugins/libpacketizer_mpeg4video_plugin.dylib
        Resources/llplugin/plugins/libpacketizer_mpegaudio_plugin.dylib
        Resources/llplugin/plugins/libpacketizer_mpegvideo_plugin.dylib
        Resources/llplugin/plugins/libpacketizer_vc1_plugin.dylib
        Resources/llplugin/plugins/libparam_eq_plugin.dylib
        Resources/llplugin/plugins/libplaylist_plugin.dylib
        Resources/llplugin/plugins/libpng_plugin.dylib
        Resources/llplugin/plugins/libpodcast_plugin.dylib
        Resources/llplugin/plugins/libposterize_plugin.dylib
        Resources/llplugin/plugins/libpostproc_plugin.dylib
        Resources/llplugin/plugins/libprefetch_plugin.dylib
        Resources/llplugin/plugins/libps_plugin.dylib
        Resources/llplugin/plugins/libpsychedelic_plugin.dylib
        Resources/llplugin/plugins/libpuzzle_plugin.dylib
        Resources/llplugin/plugins/libpva_plugin.dylib
        Resources/llplugin/plugins/librawaud_plugin.dylib
        Resources/llplugin/plugins/librawdv_plugin.dylib
        Resources/llplugin/plugins/librawvid_plugin.dylib
        Resources/llplugin/plugins/librawvideo_plugin.dylib
        Resources/llplugin/plugins/libreal_plugin.dylib
        Resources/llplugin/plugins/librecord_plugin.dylib
        Resources/llplugin/plugins/libremap_plugin.dylib
        Resources/llplugin/plugins/libremoteosd_plugin.dylib
        Resources/llplugin/plugins/libripple_plugin.dylib
        Resources/llplugin/plugins/librist_plugin.dylib
        Resources/llplugin/plugins/librotate_plugin.dylib
        Resources/llplugin/plugins/librss_plugin.dylib
        Resources/llplugin/plugins/librtp_plugin.dylib
        Resources/llplugin/plugins/librtpvideo_plugin.dylib
        Resources/llplugin/plugins/librv32_plugin.dylib
        Resources/llplugin/plugins/libsamplerate_plugin.dylib
        Resources/llplugin/plugins/libsap_plugin.dylib
        Resources/llplugin/plugins/libsatip_plugin.dylib
        Resources/llplugin/plugins/libscale_plugin.dylib
        Resources/llplugin/plugins/libscaletempo_pitch_plugin.dylib
        Resources/llplugin/plugins/libscaletempo_plugin.dylib
        Resources/llplugin/plugins/libscene_plugin.dylib
        Resources/llplugin/plugins/libschroedinger_plugin.dylib
        Resources/llplugin/plugins/libscreen_plugin.dylib
        Resources/llplugin/plugins/libscte18_plugin.dylib
        Resources/llplugin/plugins/libscte27_plugin.dylib
        Resources/llplugin/plugins/libsdp_plugin.dylib
        Resources/llplugin/plugins/libsecuretransport_plugin.dylib
        Resources/llplugin/plugins/libsepia_plugin.dylib
        Resources/llplugin/plugins/libsftp_plugin.dylib
        Resources/llplugin/plugins/libsharpen_plugin.dylib
        Resources/llplugin/plugins/libshm_plugin.dylib
        Resources/llplugin/plugins/libsid_plugin.dylib
        Resources/llplugin/plugins/libsimple_channel_mixer_plugin.dylib
        Resources/llplugin/plugins/libskiptags_plugin.dylib
        Resources/llplugin/plugins/libsmf_plugin.dylib
        Resources/llplugin/plugins/libspatialaudio_plugin.dylib
        Resources/llplugin/plugins/libspatializer_plugin.dylib
        Resources/llplugin/plugins/libspdif_plugin.dylib
        Resources/llplugin/plugins/libspeex_plugin.dylib
        Resources/llplugin/plugins/libspeex_resampler_plugin.dylib
        Resources/llplugin/plugins/libspudec_plugin.dylib
        Resources/llplugin/plugins/libstats_plugin.dylib
        Resources/llplugin/plugins/libstereo_widen_plugin.dylib
        Resources/llplugin/plugins/libstl_plugin.dylib
        Resources/llplugin/plugins/libstream_out_autodel_plugin.dylib
        Resources/llplugin/plugins/libstream_out_bridge_plugin.dylib
        Resources/llplugin/plugins/libstream_out_chromaprint_plugin.dylib
        Resources/llplugin/plugins/libstream_out_chromecast_plugin.dylib
        Resources/llplugin/plugins/libstream_out_cycle_plugin.dylib
        Resources/llplugin/plugins/libstream_out_delay_plugin.dylib
        Resources/llplugin/plugins/libstream_out_description_plugin.dylib
        Resources/llplugin/plugins/libstream_out_display_plugin.dylib
        Resources/llplugin/plugins/libstream_out_dummy_plugin.dylib
        Resources/llplugin/plugins/libstream_out_duplicate_plugin.dylib
        Resources/llplugin/plugins/libstream_out_es_plugin.dylib
        Resources/llplugin/plugins/libstream_out_gather_plugin.dylib
        Resources/llplugin/plugins/libstream_out_mosaic_bridge_plugin.dylib
        Resources/llplugin/plugins/libstream_out_record_plugin.dylib
        Resources/llplugin/plugins/libstream_out_rtp_plugin.dylib
        Resources/llplugin/plugins/libstream_out_setid_plugin.dylib
        Resources/llplugin/plugins/libstream_out_smem_plugin.dylib
        Resources/llplugin/plugins/libstream_out_standard_plugin.dylib
        Resources/llplugin/plugins/libstream_out_stats_plugin.dylib
        Resources/llplugin/plugins/libstream_out_transcode_plugin.dylib
        Resources/llplugin/plugins/libsubsdec_plugin.dylib
        Resources/llplugin/plugins/libsubsdelay_plugin.dylib
        Resources/llplugin/plugins/libsubstx3g_plugin.dylib
        Resources/llplugin/plugins/libsubsusf_plugin.dylib
        Resources/llplugin/plugins/libsubtitle_plugin.dylib
        Resources/llplugin/plugins/libsvcdsub_plugin.dylib
        Resources/llplugin/plugins/libswscale_plugin.dylib
        Resources/llplugin/plugins/libsyslog_plugin.dylib
        Resources/llplugin/plugins/libt140_plugin.dylib
        Resources/llplugin/plugins/libtaglib_plugin.dylib
        Resources/llplugin/plugins/libtcp_plugin.dylib
        Resources/llplugin/plugins/libtdummy_plugin.dylib
        Resources/llplugin/plugins/libtelx_plugin.dylib
        Resources/llplugin/plugins/libtextst_plugin.dylib
        Resources/llplugin/plugins/libtheora_plugin.dylib
        Resources/llplugin/plugins/libtimecode_plugin.dylib
        Resources/llplugin/plugins/libtospdif_plugin.dylib
        Resources/llplugin/plugins/libtransform_plugin.dylib
        Resources/llplugin/plugins/libtrivial_channel_mixer_plugin.dylib
        Resources/llplugin/plugins/libts_plugin.dylib
        Resources/llplugin/plugins/libtta_plugin.dylib
        Resources/llplugin/plugins/libttml_plugin.dylib
        Resources/llplugin/plugins/libtwolame_plugin.dylib
        Resources/llplugin/plugins/libty_plugin.dylib
        Resources/llplugin/plugins/libudp_plugin.dylib
        Resources/llplugin/plugins/libugly_resampler_plugin.dylib
        Resources/llplugin/plugins/libuleaddvaudio_plugin.dylib
        Resources/llplugin/plugins/libupnp_plugin.dylib
        Resources/llplugin/plugins/libvc1_plugin.dylib
        Resources/llplugin/plugins/libvcd_plugin.dylib
        Resources/llplugin/plugins/libvdr_plugin.dylib
        Resources/llplugin/plugins/libvdummy_plugin.dylib
        Resources/llplugin/plugins/libvhs_plugin.dylib
        Resources/llplugin/plugins/libvideotoolbox_plugin.dylib
        Resources/llplugin/plugins/libvisual_plugin.dylib
        Resources/llplugin/plugins/libvlc.5.dylib
        Resources/llplugin/plugins/libvlccore.9.dylib
        Resources/llplugin/plugins/libvmem_plugin.dylib
        Resources/llplugin/plugins/libvobsub_plugin.dylib
        Resources/llplugin/plugins/libvoc_plugin.dylib
        Resources/llplugin/plugins/libvod_rtsp_plugin.dylib
        Resources/llplugin/plugins/libvorbis_plugin.dylib
        Resources/llplugin/plugins/libvout_macosx_plugin.dylib
        Resources/llplugin/plugins/libvpx_plugin.dylib
        Resources/llplugin/plugins/libwall_plugin.dylib
        Resources/llplugin/plugins/libwav_plugin.dylib
        Resources/llplugin/plugins/libwave_plugin.dylib
        Resources/llplugin/plugins/libwebvtt_plugin.dylib
        Resources/llplugin/plugins/libx26410b_plugin.dylib
        Resources/llplugin/plugins/libx264_plugin.dylib
        Resources/llplugin/plugins/libx265_plugin.dylib
        Resources/llplugin/plugins/libxa_plugin.dylib
        Resources/llplugin/plugins/libxml_plugin.dylib
        Resources/llplugin/plugins/libyuv_plugin.dylib
        Resources/llplugin/plugins/libyuvp_plugin.dylib
        Resources/llplugin/plugins/libyuy2_i420_plugin.dylib
        Resources/llplugin/plugins/libyuy2_i422_plugin.dylib
        Resources/llplugin/plugins/libzvbi_plugin.dylib
        Resources/SLPlugin.app/Contents/Frameworks/DullahanHelper\ \(GPU\).app/Contents/MacOS/DullahanHelper\ \(GPU\)
        Resources/SLPlugin.app/Contents/Frameworks/DullahanHelper\ \(Plugin\).app/Contents/MacOS/DullahanHelper\ \(Plugin\)
        WORKING_DIRECTORY ${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents
    )
execute_process(
    COMMAND sudo codesign -f -s ${SIGNING_IDENTITY} --timestamp -o runtime --runtime-version ${CMAKE_OSX_DEPLOYMENT_TARGET}
        DullahanHelper.app
    COMMAND sudo codesign -f -s ${SIGNING_IDENTITY} --timestamp -o runtime --runtime-version ${CMAKE_OSX_DEPLOYMENT_TARGET}
        --entitlements ${CMAKE_SOURCE_DIR}/newview/slplugin.entitlements
        DullahanHelper\ \(Renderer\).app/Contents/MacOS/DullahanHelper\ \(Renderer\)
    COMMAND sudo codesign -f -s ${SIGNING_IDENTITY} --timestamp -o runtime --runtime-version ${CMAKE_OSX_DEPLOYMENT_TARGET}
        --deep
        DullahanHelper\ \(GPU\).app
        DullahanHelper\ \(Plugin\).app
    WORKING_DIRECTORY ${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks
    )
execute_process(
    COMMAND sudo codesign -f -s ${SIGNING_IDENTITY} --timestamp -o runtime --runtime-version ${CMAKE_OSX_DEPLOYMENT_TARGET}
        --entitlements ${CMAKE_SOURCE_DIR}/newview/slplugin.entitlements
        --deep
        DullahanHelper\ \(Renderer\).app
    WORKING_DIRECTORY ${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources/SLPlugin.app/Contents/Frameworks
    )
execute_process(
    COMMAND sudo codesign -f -s ${SIGNING_IDENTITY} --timestamp -o runtime --runtime-version ${CMAKE_OSX_DEPLOYMENT_TARGET}
        --entitlements ${CMAKE_SOURCE_DIR}/newview/slplugin.entitlements
        SLPlugin.app
    WORKING_DIRECTORY ${viewer_BINARY_DIR}/${VIEWER_CHANNEL}.app/Contents/Resources
    )
execute_process(
    COMMAND sudo codesign -f -s ${SIGNING_IDENTITY} --timestamp -o runtime --runtime-version ${CMAKE_OSX_DEPLOYMENT_TARGET}
        --entitlements ${CMAKE_SOURCE_DIR}/newview/slplugin.entitlements
        -i net.${VIEWER_BINARY_NAME}.viewer
        ${VIEWER_CHANNEL}.app
    WORKING_DIRECTORY ${viewer_BINARY_DIR}
    )
